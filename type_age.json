{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Popularity of Transport Types per Age (Except Car)",
  "width": 500,
  "height": 400,
  "data": {"url": "Type_Age.csv"},
  "transform": [
    {"filter": "datum.Type != 'Car'"}
  ],
  "layer": [
    {
      "mark": {
        "type": "line",
        "point": true
      },
      "encoding": {
        "x": {
          "field": "Age",
          "type": "ordinal",
          "title": "Age",
          "sort": ["15-24","25-34","35-44","45-54","55-64","65-74","75+"],
          "axis": {
            "labelExpr": "{'15-24':'15','25-34':'25','35-44':'35','45-54':'45','55-64':'55','65-74':'65','75+':'75'}[datum.label]"
          }
        },
        "y": {
          "field": "Percent_Age",
          "type": "quantitative",
          "title": "% of Age Group"
        },
        "color": {
          "field": "Type",
          "type": "nominal",
          "title": "Transport Type",
          "scale": {"scheme": "dark2"}
        },
        "tooltip": [
          {"field": "Type", "type": "nominal"},
          {"field": "Age", "type": "nominal"},
          {"field": "Population", "type": "quantitative", "format": ","},
          {"field": "Percent_Type", "type": "quantitative", "format": ".1f", "title": "% of Type"},
          {"field": "Percent_Age", "type": "quantitative", "format": ".1f", "title": "% of Age"}
        ]
      }
    },
    {
      "mark": {"type": "text", "align": "left", "baseline": "top", "fontSize": 11, "color": "#555"},
      "data": {"values": [{}]},
      "encoding": {
        "x": {"value": 145},
        "y": {"value": 10},
        "text": {"value": "Walking remains popular among older adults despite reduced mobility"}
      }
    }
  ],
  "config": {
    "axis": {"labelFontSize": 12, "titleFontSize": 12},
    "legend": {"titleFontSize": 12, "labelFontSize": 12},
    "view": {"stroke": ""}
  }
}